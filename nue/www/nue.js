function $(Y){const{root:K,fn:T,fns:C,deps:I,ctx:N}=Y;var R,J,S,E,_,j,L=[];function g(G){return new Proxy({},{get(Z,X){if(j){const U=E.indexOf(X);if(U>=0)return G[U]}return X===E?G:E.includes(X)?G[X]:X==_?S.indexOf(G):N[X]}})}function B(G,Z,X,U){const M=V({fns:C,dom:K.cloneNode(!0)},g(G),I,N);L[U?"unshift":"push"](M),M.before(U||R),N.oninsert?.call(N,M.$el,G,{index:Z,is_repaint:!!X,is_first:!Z,is_last:Z==S.length-1,items:S})}function O(){L.forEach((G)=>G.unmount()),L=[],S.forEach(B)}function w(G){const{unshift:Z,splice:X,push:U,sort:M,reverse:q}=G;return Object.assign(G,{push(z){U.call(S,z),B(z,S.length-1)},unshift(z){Z.call(S,z),B(z,0,null,L[0].$el)},sort(z){M.call(S,z),O()},reverse(){q.call(S),O()},splice(z,D){L.slice(z,z+D).forEach((H)=>H.unmount()),L.splice(z,D),X.call(S,z,D)},shift(){G.splice(0,1)},pop(){G.splice(G.length-1,1)},remove(z){const D=S.indexOf(z);if(D>=0)G.splice(D,1)}})}function u(){var G;if([E,G,_,j]=T(N),S){if(G!==J)S=w(G),O(),J=G;return L.forEach((Z)=>Z.update())}if(G){const Z=K.parentElement;R=new Text(""),Z.insertBefore(R,K),Z.removeChild(K),S=w(G),G.forEach(B),J=G}}return{update:u}}function h(Y){const{root:K,fn:T,fns:C,deps:I,ctx:N}=Y,R=[];var J=K,S,E;function _(g,B){Y.processAttrs(g);const O=V({fns:C,dom:g},N,I,N);R.push(O),O.fn=B}_(K,T);while(J=J.nextElementSibling){const g=J.getAttribute(":else-if");if(g)_(J,C[g]),J.removeAttribute(":else-if");else if(J.hasAttribute(":else"))_(J,()=>!0),J.removeAttribute(":else");else{E=J;break}}var j;function L(){if(!S){const B=K.parentElement;S=new Text(""),B.insertBefore(S,K)}const g=R.find((B)=>B.fn(N));R.forEach((B)=>B==g?B.before(S):B.unmount())}return{update:L,next:E}}var y=function(Y){const K=document.createElement("_");return K.innerHTML=Y.trim(),K.firstChild},A=function(Y,K=""){return Y?.join?Y.filter((T)=>T||T===0).join(K).trim().replace(/\s+/g," "):Y||""},f=function(Y,K){if(Y==K)return[Y];if(!Y.join)Y=[Y];if(K&&!K.join)K=[K];return Y.concat(K)},b={":if":h,":for":$},x=["class","style","id"];function V(Y,K={},T=[],C={}){const{Impl:I,tmpl:N,fns:R=[],dom:J,inner:S}=Y,E=[];function _(q){const z=q.nodeType;if(z==3){const[D,H]=/:(\d+):/.exec(q.textContent.trim())||[],Q=R[H];if(Q)E.push((F)=>q.textContent=A(Q(M)))}if(z==1){for(let F in b){const W=R[q.getAttribute(F)];if(F==":if"&&W&&q.getAttribute(":for"))if(W(M))continue;else q.removeAttribute(":for");if(W){q.removeAttribute(F);const P=b[F]({root:q,fn:W,fns:R,deps:T,ctx:M,processAttrs:j});return E.push(P.update),P}}const D=q.tagName.toLowerCase(),H=q.nextSibling;if(S&&D=="slot")return S.replace(q),{next:H};const Q=T.find((F)=>F.name==D);if(Q){if(q.firstChild){const P=document.createElement("_");P.append(...q.childNodes),Q.inner=V({fns:R,dom:P},M,T)}const F=u(q),W=V(Q,K,T,F).mount(q);if(J?.tagName.toLowerCase()==Q.name)U.$el=W.$el;return E.push((P)=>G(W.$el,F)),U.$refs[q.getAttribute("ref")||D]=W.impl,{next:H}}else j(q),B(q,_)}}function j(q){for(let z of[...q.attributes])g(q,z.name,z.value)}function L(q,z,D){if(q.getAttribute(z)!==D)q.setAttribute(z,D)}function g(q,z,D){if(z=="ref"||z=="name")U.$refs[D]=q;const H=R[D];if(!H)return;const Q=z.slice(1),F=z[0];if(":@$".includes(F))q.removeAttribute(z);if(Q=="attr")return E.push((W)=>{for(let[P,v]of Object.entries(H(M)))L(q,P,v===!0?"":v)});if(F==":"&&Q!="bind")E.push((W)=>{let P=H(M);L(q,Q,A(P))});if(F=="@")q[`on${Q}`]=(W)=>{H.call(M,M,W),(C?.update||Z)()};if(F=="$")E.push((W)=>{if(!(q[Q]=!!H(M)))q.removeAttribute(Q)});if(Q=="html")E.push((W)=>q.innerHTML=H(M))}function B(q,z){let D=q.firstChild;while(D)D=z(D)?.next||D.nextSibling}function O(q,z){const D=R[q.getAttribute(":"+z)];return D?D(M):q.getAttribute(z)||q[z]||void 0}function w(q){const z={};for(let D of[...q.attributes]){const H=D.name.replace(":",""),Q=O(q,H);if(!x.includes(H)&&typeof Q!="object")z[H]=Q==null?!0:Q}return z}function u(q){return q.$attrs=w(q),new Proxy(q,{get(z,D){return O(q,D)}})}function G(q,z){const D=f(O(q,"class")||[],z.class);if(D[0])q.className=A(D," ");const{id:H,style:Q}=z;if(Q&&Q.x!="")q.style=A(Q);if(H)q.id=A(H)}function Z(q){if(q)Object.assign(X,q);return E.map((z)=>z()),X.updated?.call(M,M),U}let X={};const U={update:Z,$el:J,get root(){return U.$el},$refs:{},$parent:C,impl:X,mount(q){const z=J||(U.$el=y(N));let D=q.querySelector("script");if(D)Object.assign(K,JSON.parse(D.textContent)),q.insertAdjacentElement("afterend",D);if(I)X=U.impl=new I(M),X.$refs=U.$refs,X.update=Z;_(z),q.replaceWith(z);for(let H of[...q.attributes])L(z,H.name,H.value);return X.mounted?.call(M,M),Z()},replace(q){_(J),q.replaceWith(...J.children),Z()},before(q){if(J){if(U.$el=J,!document.body.contains(J))q.before(J);if(!J.walked)_(J),J.walked=1;return Z()}},unmount(){try{U.root.remove()}catch(q){}X.unmounted?.call(M,M),Z()}},M=new Proxy({},{get(q,z){for(let D of[U,X,K,C,C.bind]){const H=D&&D[z];if(H!=null)return H}},set(q,z,D){if(C&&C[z]!==void 0)C[z]=D,C.update();else U[z]=D;return!0}});return U}export{V as default,V as createApp};
